{"ast":null,"code":"var _jsxFileName = \"/Users/Andreivan/git_study/FE_PatrimonyManagement/patrimony-management/src/components/patrimony_management/AssetFormComponent.jsx\";\nimport React, { Component } from \"react\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport AuthenticationService from \"../../authentication/AuthenticationService\";\nimport AssetControlDataService from \"../../api/AssetControlDataService\";\nimport AssetDataService from \"../../api/AssetDataService\";\nimport moment from 'moment';\nlet username = AuthenticationService.getLoggedInUserName();\nlet token = AuthenticationService.getLoggedInToken();\n\nclass AssetFormComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: this.props.match.params.id,\n      name: '',\n      date: moment(new Date()).format('YYYY-MM-DD'),\n      initial_value: '',\n      company: '',\n      interest_rate: '',\n      is_active: '',\n      current_value: '',\n      is_variable_income: ''\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.state.id === \"new\") {\n      return;\n    }\n\n    AssetDataService.retrieveAsset(username, this.state.id, token).then(response => this.setState({\n      name: response.data.name,\n      date: moment(response.data.date).format('YYYY-MM-DD'),\n      initial_value: response.data.initial_value,\n      company: response.data.company,\n      interest_rate: response.data.interest_rate,\n      is_active: response.data.is_active,\n      current_value: response.data.current_value,\n      is_variable_income: response.data.is_variable_income\n    }));\n  }\n\n  onSubmit(values) {\n    let asset = {\n      name: values.name,\n      date: values.date,\n      initial_value: values.initial_value,\n      company: values.company,\n      interest_rate: values.interest_rate,\n      is_active: values.is_active,\n      current_value: values.current_value,\n      is_variable_income: values.is_variable_income\n    };\n\n    if (this.state.id === \"new\") {\n      AssetDataService.createAsset(username, asset, token).then(() => AssetControlDataService.createAssetCurrentValue(username, token).then(this.props.history.push('/assets')));\n    } else {\n      asset.id = this.state.id;\n\n      if (asset.current_value != this.state.current_value) {\n        AssetDataService.updateAsset(username, this.state.id, asset, token).then(() => AssetControlDataService.createAssetCurrentValue(username, token), this.props.history.push('/assets'));\n      } else {\n        AssetDataService.updateAsset(username, this.state.id, asset, token).then(() => this.props.history.push('/assets'));\n      }\n    }\n  }\n\n  onCancel() {\n    window.history.back();\n  }\n\n  render() {\n    let {\n      name,\n      date,\n      initial_value,\n      company,\n      interest_rate,\n      is_active,\n      current_value,\n      is_variable_income\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, \"Asset\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"asset\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Formik, {\n      initialValues: {\n        name,\n        date,\n        initial_value,\n        company,\n        interest_rate,\n        is_active,\n        current_value,\n        is_variable_income\n      },\n      onSubmit: this.onSubmit,\n      validateOnChange: false,\n      validateOnBlur: false,\n      validate: this.validate,\n      enableReinitialize: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }, props => /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 19\n      }\n    }, \"Name:\"), /*#__PURE__*/React.createElement(Field, {\n      className: \"form-control\",\n      type: \"text\",\n      name: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }, \"Date:\"), /*#__PURE__*/React.createElement(Field, {\n      className: \"fieldCategA\",\n      type: \"date\",\n      name: \"date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      className: \"fieldCategA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, \"Initial Value:\"), /*#__PURE__*/React.createElement(Field, {\n      type: \"text\",\n      name: \"initial_value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"fieldset\", {\n      className: \"fieldCategA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, \"Interest Rate:\"), /*#__PURE__*/React.createElement(Field, {\n      type: \"text\",\n      name: \"interest_rate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 19\n      }\n    }, \"Is Active?\"), /*#__PURE__*/React.createElement(Field, {\n      className: \"checkbox\",\n      type: \"checkbox\",\n      name: \"is_active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 19\n      }\n    }, \"Is Variable Income?\"), /*#__PURE__*/React.createElement(Field, {\n      className: \"checkbox\",\n      type: \"checkbox\",\n      name: \"is_variable_income\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 19\n      }\n    }, \"Current Value:\"), /*#__PURE__*/React.createElement(Field, {\n      className: \"fieldCategA\",\n      type: \"text\",\n      name: \"current_value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 19\n      }\n    }, \"Company:\"), /*#__PURE__*/React.createElement(Field, {\n      className: \"form-control\",\n      type: \"text\",\n      name: \"company\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-warning\",\n      onClick: this.onCancel,\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, \"Cancel\")))));\n  }\n\n}\n\nexport default AssetFormComponent;","map":{"version":3,"sources":["/Users/Andreivan/git_study/FE_PatrimonyManagement/patrimony-management/src/components/patrimony_management/AssetFormComponent.jsx"],"names":["React","Component","Formik","Form","Field","ErrorMessage","AuthenticationService","AssetControlDataService","AssetDataService","moment","username","getLoggedInUserName","token","getLoggedInToken","AssetFormComponent","constructor","props","state","id","match","params","name","date","Date","format","initial_value","company","interest_rate","is_active","current_value","is_variable_income","onSubmit","bind","componentDidMount","retrieveAsset","then","response","setState","data","values","asset","createAsset","createAssetCurrentValue","history","push","updateAsset","onCancel","window","back","render","validate"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport AuthenticationService from \"../../authentication/AuthenticationService\"\nimport AssetControlDataService from \"../../api/AssetControlDataService\"\nimport AssetDataService from \"../../api/AssetDataService\"\nimport moment from 'moment'\n\nlet username = AuthenticationService.getLoggedInUserName();\nlet token = AuthenticationService.getLoggedInToken();\n\nclass AssetFormComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: this.props.match.params.id,\n      name: '',\n      date: moment(new Date()).format('YYYY-MM-DD'),\n      initial_value: '',\n      company: '',\n      interest_rate: '',\n      is_active: '',\n      current_value: '',\n      is_variable_income: '',\n      \n    }\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.state.id === \"new\") {\n      return;\n    }\n    AssetDataService.retrieveAsset(username, this.state.id, token)\n      .then(response => this.setState({\n            name: response.data.name,\n            date: moment(response.data.date).format('YYYY-MM-DD'),\n            initial_value: response.data.initial_value,\n            company: response.data.company,\n            interest_rate: response.data.interest_rate,\n            is_active: response.data.is_active,\n            current_value: response.data.current_value,\n            is_variable_income: response.data.is_variable_income\n          }));\n  }\n\n  onSubmit(values) {      \n    let asset = {\n        name: values.name,\n        date: values.date,\n        initial_value: values.initial_value,\n        company: values.company,\n        interest_rate: values.interest_rate,\n        is_active: values.is_active,\n        current_value: values.current_value,\n        is_variable_income: values.is_variable_income\n    }\n    if(this.state.id === \"new\") {\n      AssetDataService.createAsset(username, asset, token)\n            .then(() => AssetControlDataService.createAssetCurrentValue(username, token)\n                            .then( this.props.history.push('/assets')) ) \n              \n      } else {\n      asset.id = this.state.id \n      if(asset.current_value != this.state.current_value) {\n        AssetDataService.updateAsset(username, this.state.id, asset, token)\n            .then(() => AssetControlDataService.createAssetCurrentValue(username, token),\n              this.props.history.push('/assets'));\n      } else {\n        AssetDataService.updateAsset(username, this.state.id, asset, token)\n            .then(() => this.props.history.push('/assets'));\n      }            \n      \n    }\n}\n\n  onCancel() {\n    window.history.back();\n  }\n\n  render() {\n    let {name, date, initial_value, company, interest_rate, is_active, current_value, is_variable_income} = this.state;\n\n    return (\n      <div className=\"text-center\">\n        <h1>Asset</h1>\n        <div className=\"asset\">\n          <Formik\n            initialValues={{name, date, initial_value, company, interest_rate, is_active, current_value, is_variable_income}}\n            onSubmit={this.onSubmit}\n            validateOnChange={false}\n            validateOnBlur={false}\n            validate={this.validate}\n            enableReinitialize={true}\n          >\n            {(props) => (\n              <Form>\n                <fieldset className=\"form-group\">\n                  <label>Name:</label>\n                  <Field className=\"form-control\" type=\"text\" name=\"name\" />\n                </fieldset>\n                <fieldset className=\"form-group\">\n                  <label>Date:</label>\n                  <Field\n                    className=\"fieldCategA\"\n                    type=\"date\"\n                    name=\"date\"\n                  />\n                </fieldset>\n                <div class=\"row\">\n                  <fieldset className=\"fieldCategA\">\n                    <label>Initial Value:</label>\n                    <Field\n                      type=\"text\"\n                      name=\"initial_value\"\n                    />\n                  </fieldset>\n                  <fieldset className=\"fieldCategA\">\n                    <label>Interest Rate:</label>\n                    <Field\n                      type=\"text\"\n                      name=\"interest_rate\"\n                    />\n                  </fieldset>\n                </div>\n              \n                <fieldset className=\"form-group\">\n                  <label>Is Active?</label>\n                  <Field\n                    className=\"checkbox\"\n                    type=\"checkbox\"\n                    name=\"is_active\"\n                  />\n                </fieldset>\n                <fieldset className=\"form-group\">\n                  <label>Is Variable Income?</label>\n                  <Field\n                    className=\"checkbox\"\n                    type=\"checkbox\"\n                    name=\"is_variable_income\"\n                  />\n                </fieldset>\n                <fieldset className=\"form-group\">\n                  <label>Current Value:</label>\n                  <Field\n                    className=\"fieldCategA\"\n                    type=\"text\"\n                    name=\"current_value\"\n                  />\n                </fieldset>\n                <fieldset className=\"form-group\">\n                  <label>Company:</label>\n                  <Field className=\"form-control\" type=\"text\" name=\"company\" />\n                </fieldset>\n                <button className=\"btn btn-success\" type=\"submit\">\n                  Save\n                </button>\n                <button className=\"btn btn-warning\" onClick={this.onCancel} type=\"button\">\n                  Cancel\n                </button>\n              </Form>\n            )}\n          </Formik>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AssetFormComponent;\n"]},"metadata":{},"sourceType":"module"}